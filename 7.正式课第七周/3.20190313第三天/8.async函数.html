<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<script>
    /*function fn() {
     console.log(200);
     }
     setTimeout(function () {
     console.log(500);
     },0);
     async function sum() {
     console.log(100);
     await fn();
     console.log(300);
     }
     let s = sum();
     console.log(400);
     console.log(s);*/
    //1. async await 是成对出现;
    //2. 在函数体中await函数后面的代码是异步的；
    //3. async函数默认返回一个promise的实例；

    // JS分为主任务队列和等待任务队列
    // 需要等到 主任务队列结束之后，再去执行等待任务队列；
    // 在等待任务队列中又分为宏任务和微任务；
    // 异步： 定时器  ajax  事件  then async await;
    //  微任务： promise的then   async  await Process.nextTick 这些都是微任务；
    // 宏任务：setTimeout  setInterval...
    // 如果等待队列中既有微任务又有宏任务，那么浏览器需要先执行微任务，然后再执行宏任务；
    /*let p = new Promise(function (resolve, reject) {
        console.log(1)
        setTimeout(function () {
            resolve()
        }, 0)
        console.log(3);
    })
    setTimeout(function () {
        console.log(5);
    }, 0)
    p.then(function () {
        console.log(2);
    })
    console.log(4);*/// 1 3  4  2  5

    async function async1() {
        console.log('async1 start');// 2
        await async2();
        console.log('async1 end');// 6
    }
    async function async2() {
        console.log('async2');// 3
    }
    console.log('script start');// 1
    setTimeout(() => {
        console.log('setTimeout');// 8
    }, 0);
    async1();
    new Promise(resolve => {
        console.log('promise1');// 4
        resolve();
    }).then(() => {
        console.log('promise2');// 7
    });
    console.log('script end');// 5

   /* console.log('1');
    setTimeout(function () {
        console.log('2');
        new Promise(function (resolve) {
            console.log('4');
            resolve();
        }).then(function () {
            console.log('5');
        });
    });
    new Promise(function (resolve) {
        console.log('7');
        resolve();
    }).then(function () {
        console.log('8');
    });
    setTimeout(function () {
        console.log('9');
        new Promise(function (resolve) {
            console.log('11');
            resolve();
        }).then(function () {
            console.log('12');
        });
    });*/
    // JS的事件循环机制？


</script>
</body>
</html>